<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><title>MAXimal :: algo :: Нахождение наибольшей нулевой подматрицы</title><meta http-equiv="Content-Type" content="text/html; charset=windows-1251"><meta name="author" lang="ru" content="e-maxx" /><meta name="description" content="Алгоритмы, олимпиадное программирование, математика" /><meta name="keywords" content="алгоритмы программирование" /><meta name="google-site-verification" content="Pnjjj2XuxB0CTiqgDDvkp79bfSeDQ8Vw57iNeDJZkSc" /><link rel="stylesheet" type="text/css" href="../data/style.css"><script type="text/javascript" src="../data/jquery.js"></script><script type="text/javascript" src="../data/page-contents.js"></script><link rel="stylesheet" type="text/css" href="../geshi/geshi.css"><!--[if IE]><style>.menu a, .menu a:hover { width: 100%; }</style><![endif]--></head><body><table class=main cellpadding=0 cellspacing=0><tr><td class=title colspan=2><p>MAXimal</p></td></tr><tr><td class=menu><ul><li><a href="../index.php.html" >home</a></li><li><a href="index.html" class=current>algo</a></li><li><a href="../bookz/index.html" >bookz</a></li><li><a href="../forum/index.html" >forum</a></li><li><a href="../about.php.html" >about</a></li></ul></td><td class=content><p class=algoinfo>добавлено: 11 Jun 2008 11:09<br>редактировано: 24 Oct 2010 23:40</p><div id="contents-table"><p id="contents-table-title">Содержание <a href="maximum_zero_submatrix.html#" id="contents-hide">[скрыть]</a><a href="maximum_zero_submatrix.html#" id="contents-show" style="display:none">[показать]</a></p><div style="display:none"></div></div><h1> Нахождение наибольшей нулевой подматрицы </h1><p>Дана матрица <img class=tex src="../tex2png/cache/e4c9b6bf3a65f2e487e7cb3e199f2154.png" alt="a"> размером <img class=tex src="../tex2png/cache/ed0e13f7024ff254a4fccd689fe21ad3.png" alt="n \times m">. Требуется найти в ней такую подматрицу, состоящую только из нулей, и среди всех таких &mdash; имеющую наибольшую площадь (подматрица &mdash; это прямоугольная область матрицы).<p>Тривиальный алгоритм, &mdash; перебирающий искомую подматрицу, &mdash; даже при самой хорошей реализации будет работать <img class=tex src="../tex2png/cache/204897774581e838df44757b516be4d2.png" alt="O (n^2 m^2)">. Ниже описывается алгоритм, работающий за <img class=tex src="../tex2png/cache/a6b2398465a599d7b0ac3127f16f0244.png" alt="O (n m)">, т.е. за линейное относительно размеров матрицы время.<p><p><h2 style="padding-top:40px;"> Алгоритм </h2><p>Для устранения неоднозначностей сразу заметим, что <img class=tex src="../tex2png/cache/8bc19c5640342f9c5ad0ba16baf59981.png" alt="n"> равно числу строк матрицы <img class=tex src="../tex2png/cache/e4c9b6bf3a65f2e487e7cb3e199f2154.png" alt="a">, соответственно, <img class=tex src="../tex2png/cache/4f70748eaed5e0c2c70d7e899166ee1d.png" alt="m"> &mdash; это число столбцов. Элементы матрицы будем нумеровать в <img class=tex src="../tex2png/cache/d796aaaffd5bff4144c8ac3509c1d33d.png" alt="0">-индексации, т.е. в обозначении <img class=tex src="../tex2png/cache/60cf76e819ed3733bf887dc748d4b3ef.png" alt="a[i][j]"> индексы <img class=tex src="../tex2png/cache/2d9d1096e116db33bc39a0accf4e9ef7.png" alt="i"> и <img class=tex src="../tex2png/cache/f2761432c5377ee4ded848884be6d407.png" alt="j"> пробегают диапазоны <img class=tex src="../tex2png/cache/6cdfcbdc8b36ffb530cf688c452170b9.png" alt="i = 0 \ldots n-1">, <img class=tex src="../tex2png/cache/745c75a5a06d64ceef0ea92b52a63314.png" alt="j = 0 \ldots m-1">.<p><p><h3 style="padding-top:15px;"> Шаг 1: Вспомогательная динамика </h3><p>Сначала посчитаем следующую вспомогательную динамику: <img class=tex src="../tex2png/cache/a18f11689b09b23faa10c78d6b244cf8.png" alt="d[i][j]"> &mdash; ближайшая сверху единица для элемента <img class=tex src="../tex2png/cache/60cf76e819ed3733bf887dc748d4b3ef.png" alt="a[i][j]">. Формально говоря, <img class=tex src="../tex2png/cache/a18f11689b09b23faa10c78d6b244cf8.png" alt="d[i][j]"> равно наибольшему номеру строки (среди строк диапазоне от <img class=tex src="../tex2png/cache/fc5f9135f75a6da19325dc3822484bbd.png" alt="-1"> до <img class=tex src="../tex2png/cache/2d9d1096e116db33bc39a0accf4e9ef7.png" alt="i">), в которой в <img class=tex src="../tex2png/cache/f2761432c5377ee4ded848884be6d407.png" alt="j">-ом столбце стоит единица. В частности, если такой строки нет, то <img class=tex src="../tex2png/cache/a18f11689b09b23faa10c78d6b244cf8.png" alt="d[i][j]"> полагается равным <img class=tex src="../tex2png/cache/fc5f9135f75a6da19325dc3822484bbd.png" alt="-1"> (это можно понимать как то, что вся матрица как будто ограничена снаружи единицами).<p>Эту динамику легко считать двигаясь по матрице сверху вниз: пусть мы стоит в <img class=tex src="../tex2png/cache/2d9d1096e116db33bc39a0accf4e9ef7.png" alt="i">-ой строке, и известно значение динамики для предыдущей строки. Тогда достаточно скопировать эти значения в динамику для текущей строки, изменив только те элементы, в которых в матрице стоят единицы. Понятно, что тогда даже не требуется хранить всю прямоугольную матрицу динамики, а достаточно только одного массива размера <img class=tex src="../tex2png/cache/4f70748eaed5e0c2c70d7e899166ee1d.png" alt="m">:<p><pre class="notranslate cpp">vector<span class="sy1">&lt;</span><span class="kw4">int</span><span class="sy1">&gt;</span> d <span class="br0">&#40;</span>m, <span class="sy2">-</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="sy4">;</span>
<span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i<span class="sy1">=</span><span class="nu0">0</span><span class="sy4">;</span> i<span class="sy1">&lt;</span>n<span class="sy4">;</span> <span class="sy2">++</span>i<span class="br0">&#41;</span> <span class="br0">&#123;</span>
	<span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> j<span class="sy1">=</span><span class="nu0">0</span><span class="sy4">;</span> j<span class="sy1">&lt;</span>m<span class="sy4">;</span> <span class="sy2">++</span>j<span class="br0">&#41;</span>
		<span class="kw1">if</span> <span class="br0">&#40;</span>a<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#91;</span>j<span class="br0">&#93;</span> <span class="sy1">==</span> <span class="nu0">1</span><span class="br0">&#41;</span>
			d<span class="br0">&#91;</span>j<span class="br0">&#93;</span> <span class="sy1">=</span> i<span class="sy4">;</span>
&nbsp;
	<span class="co1">// вычислили d для i-ой строки, можем здесь использовать эти значения</span>
<span class="br0">&#125;</span></pre><p><p><h3 style="padding-top:15px;"> Шаг 2: Решение задачи </h3><p>Уже сейчас мы можем решить задачу за <img class=tex src="../tex2png/cache/d7cfdb371625c9d2c8cd5203a6cafdff.png" alt="O (n m^2)"> &mdash; просто перебирать в текущей строке номер левого и правого столбцов искомой подматрицы, и с помощью динамики <img class=tex src="../tex2png/cache/2108d8213526c488460c3eb1fe11c115.png" alt="d[][]"> вычислять за <img class=tex src="../tex2png/cache/d0ea0c0a39869a72fadf80b704c58fbf.png" alt="O (1)"> верхнюю границу нулевой подматрицы. Однако можно пойти дальше и значительно улучшить асимптотику решения.<p>Ясно, что искомая нулевая подматрица ограничена со всех четырёх сторон какими-то единичками (либо границами поля), &mdash; которые и мешают ей увеличиться в размерах и улучшить ответ. Поэтому, утверждается, мы не пропустим ответ, если будем действовать следующим образом: сначала переберём номер <img class=tex src="../tex2png/cache/2d9d1096e116db33bc39a0accf4e9ef7.png" alt="i"> нижней строки нулевой подматрицы, затем переберём, в каком столбце <img class=tex src="../tex2png/cache/f2761432c5377ee4ded848884be6d407.png" alt="j"> мы будем упирать вверх нулевую подматрицу. Пользуясь значением <img class=tex src="../tex2png/cache/a18f11689b09b23faa10c78d6b244cf8.png" alt="d[i][j]">, мы сразу получаем номер верхней строки нулевой подматрицы. Осталось теперь определить оптимальные левую и правую границы нулевой подматрицы, &mdash; т.е. максимально раздвинуть эту подматрицу влево и вправо от <img class=tex src="../tex2png/cache/f2761432c5377ee4ded848884be6d407.png" alt="j">-го столбца.<p>Что значит раздвинуть максимально влево? Это значит найти такой индекс <img class=tex src="../tex2png/cache/2b3831d7d2edca0658a067b684887d60.png" alt="k_1">, для которого будет <img class=tex src="../tex2png/cache/c37fec2dfb8f0db4773c7f0ab4e48e2a.png" alt="d[i][k_1] > d[i][j]">, и при этом <img class=tex src="../tex2png/cache/2b3831d7d2edca0658a067b684887d60.png" alt="k_1"> &mdash; ближайший такой слева для индекса <img class=tex src="../tex2png/cache/f2761432c5377ee4ded848884be6d407.png" alt="j">. Понятно, что тогда <img class=tex src="../tex2png/cache/5496e6ba3fa4f082a3986ed51de8b4a1.png" alt="k_1+1"> даёт номер левого столбца искомой нулевой подматрицы. Если такого индекса вообще нет, то положить <img class=tex src="../tex2png/cache/f4646364a3bb5d82651282f20df3b2c6.png" alt="k_1=-1"> (это означает, что мы смогли расширить текущую нулевую подматрицу влево до упора &mdash; до границы всей матрицы <img class=tex src="../tex2png/cache/e4c9b6bf3a65f2e487e7cb3e199f2154.png" alt="a">).<p>Симметрично можно определить индекс <img class=tex src="../tex2png/cache/daa41655761beb69365ffeafd21fc329.png" alt="k_2"> для правой границы: это ближайший справа от <img class=tex src="../tex2png/cache/f2761432c5377ee4ded848884be6d407.png" alt="j"> индекс такой, что <img class=tex src="../tex2png/cache/dd79bfe1cafc6a3b87c30ffe3ee219ac.png" alt="d[i][k_2] > d[i][j]"> (либо <img class=tex src="../tex2png/cache/4f70748eaed5e0c2c70d7e899166ee1d.png" alt="m">, если такого индекса нет).<p>Итак, индексы <img class=tex src="../tex2png/cache/2b3831d7d2edca0658a067b684887d60.png" alt="k_1"> и <img class=tex src="../tex2png/cache/daa41655761beb69365ffeafd21fc329.png" alt="k_2">, если мы научимся эффективно их искать, дадут нам всю необходимую информацию о текущей нулевой подматрице. В частности, её площадь будет равна <img class=tex src="../tex2png/cache/ce35c248ff8902f74814021e5e031fc7.png" alt="(i - d[i][j]) \cdot (k_2 - k_1 - 1)">.<p>Как же искать эти индексы <img class=tex src="../tex2png/cache/2b3831d7d2edca0658a067b684887d60.png" alt="k_1"> и <img class=tex src="../tex2png/cache/daa41655761beb69365ffeafd21fc329.png" alt="k_2"> эффективно при фиксированных <img class=tex src="../tex2png/cache/2d9d1096e116db33bc39a0accf4e9ef7.png" alt="i"> и <img class=tex src="../tex2png/cache/f2761432c5377ee4ded848884be6d407.png" alt="j">? Нас удовлетворит только асимптотика <img class=tex src="../tex2png/cache/817532dd84d4eb666e5d80dc58098e94.png" alt="O(1)">, хотя бы в среднем.<p>Добиться такой асимптотики можно с помощью стека (stack) следующим образом. Научимся сначала искать индекс <img class=tex src="../tex2png/cache/2b3831d7d2edca0658a067b684887d60.png" alt="k_1">, и сохранять его значение для каждого индекса <img class=tex src="../tex2png/cache/f2761432c5377ee4ded848884be6d407.png" alt="j"> внутри текущей строки <img class=tex src="../tex2png/cache/2d9d1096e116db33bc39a0accf4e9ef7.png" alt="i"> в динамике <img class=tex src="../tex2png/cache/32430566c4aab71fcece1881523c359a.png" alt="d_1[i][j]">. Для этого будем просматривать все столбцы <img class=tex src="../tex2png/cache/f2761432c5377ee4ded848884be6d407.png" alt="j"> слева направо, и заведём такой стек, в котором всегда будут лежать только те столбцы, в которых значение динамики <img class=tex src="../tex2png/cache/2108d8213526c488460c3eb1fe11c115.png" alt="d[][]"> строго больше <img class=tex src="../tex2png/cache/a18f11689b09b23faa10c78d6b244cf8.png" alt="d[i][j]">. Понятно, что при переходе от столбца <img class=tex src="../tex2png/cache/f2761432c5377ee4ded848884be6d407.png" alt="j"> к следующему столбцу <img class=tex src="../tex2png/cache/c8ed7217716b47abf98aede9ec9508b9.png" alt="j+1"> требуется обновить содержимое этого стека. Утверждается, что требуется сначала положить в стек столбец <img class=tex src="../tex2png/cache/f2761432c5377ee4ded848884be6d407.png" alt="j"> (поскольку для него стек "хороший"), а затем, пока на вершине стека лежит неподходящий элемент (т.е. у которого значение <img class=tex src="../tex2png/cache/7626da875d0916986ff685e9a127990f.png" alt="d \le d[i][j+1]">), &mdash; доставать этот элемент. Легко понять, что удалять из стека достаточно только из его вершины, и ни из каких других его мест (потому что стек будет содержать возрастающую по <img class=tex src="../tex2png/cache/30956e25578e9cb8f03bd9d36433020c.png" alt="d"> последовательность столбцов).<p>Значение <img class=tex src="../tex2png/cache/32430566c4aab71fcece1881523c359a.png" alt="d_1[i][j]"> для каждого <img class=tex src="../tex2png/cache/f2761432c5377ee4ded848884be6d407.png" alt="j"> будет равно значению, лежащему в этот момент на вершине стека.<p>Ясно, что поскольку добавлений в стек на каждой строчке <img class=tex src="../tex2png/cache/2d9d1096e116db33bc39a0accf4e9ef7.png" alt="i"> происходит ровно <img class=tex src="../tex2png/cache/4f70748eaed5e0c2c70d7e899166ee1d.png" alt="m"> штук, то и удалений также не могло быть больше, поэтому в сумме асимптотика будет линейной.<p>Динамика <img class=tex src="../tex2png/cache/54bcf310c049860b37bf7cf8251d8154.png" alt="d_2[i][j]"> для нахождения индексов <img class=tex src="../tex2png/cache/daa41655761beb69365ffeafd21fc329.png" alt="k_2"> считается аналогично, только надо просматривать столбцы справа налево.<p>Также следует отметить, что этот алгоритм потребляет <img class=tex src="../tex2png/cache/baa7e0765a2f4f8991346c62c1279993.png" alt="O(m)"> памяти (не считая входные данные &mdash; матрицу <img class=tex src="../tex2png/cache/f9fa957c4ed546b728381d1556189238.png" alt="a[][]">).<p><p><h2 style="padding-top:40px;"> Реализация </h2><p>Эта реализация вышеописанного алгоритма считывает размеры матрицы, затем саму матрицу (как последовательность чисел, разделённых пробелами или переводами строк), и затем выводит ответ &mdash; размер наибольшей нулевой подматрицы.<p>Легко улучшить эту реализацию, чтобы она также выводила саму нулевую подматрицу: для этого надо при каждом изменении <img class=tex src="../tex2png/cache/607d24373b46b951fe9353e68153b1f4.png" alt="\rm ans"> запоминать также номера строк и столбцов подматрицы (ими будут соответственно <img class=tex src="../tex2png/cache/16feed5b0bc695d7a84bb7ac1d73668d.png" alt="d[j]+1">, <img class=tex src="../tex2png/cache/2d9d1096e116db33bc39a0accf4e9ef7.png" alt="i">, <img class=tex src="../tex2png/cache/ca1e1eb142ee98304e7d6bfe8bcf1f15.png" alt="d1[j]+1">, <img class=tex src="../tex2png/cache/5e3709fa4e0d6b252ea104c8114c81f1.png" alt="d2[j]-1">).<p><pre class="notranslate cpp"><span class="kw4">int</span> n, m<span class="sy4">;</span>
<span class="kw3">cin</span> <span class="sy1">&gt;&gt;</span> n <span class="sy1">&gt;&gt;</span> m<span class="sy4">;</span>
vector <span class="sy1">&lt;</span> vector<span class="sy1">&lt;</span><span class="kw4">int</span><span class="sy1">&gt;</span> <span class="sy1">&gt;</span> a <span class="br0">&#40;</span>n, vector<span class="sy1">&lt;</span><span class="kw4">int</span><span class="sy1">&gt;</span> <span class="br0">&#40;</span>m<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy4">;</span>
<span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i<span class="sy1">=</span><span class="nu0">0</span><span class="sy4">;</span> i<span class="sy1">&lt;</span>n<span class="sy4">;</span> <span class="sy2">++</span>i<span class="br0">&#41;</span>
	<span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> j<span class="sy1">=</span><span class="nu0">0</span><span class="sy4">;</span> j<span class="sy1">&lt;</span>m<span class="sy4">;</span> <span class="sy2">++</span>j<span class="br0">&#41;</span>
		<span class="kw3">cin</span> <span class="sy1">&gt;&gt;</span> a<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#91;</span>j<span class="br0">&#93;</span><span class="sy4">;</span>
&nbsp;
<span class="kw4">int</span> ans <span class="sy1">=</span> <span class="nu0">0</span><span class="sy4">;</span>
vector<span class="sy1">&lt;</span><span class="kw4">int</span><span class="sy1">&gt;</span> d <span class="br0">&#40;</span>m, <span class="sy2">-</span><span class="nu0">1</span><span class="br0">&#41;</span>, d1 <span class="br0">&#40;</span>m<span class="br0">&#41;</span>, d2 <span class="br0">&#40;</span>m<span class="br0">&#41;</span><span class="sy4">;</span>
stack<span class="sy1">&lt;</span><span class="kw4">int</span><span class="sy1">&gt;</span> st<span class="sy4">;</span>
<span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i<span class="sy1">=</span><span class="nu0">0</span><span class="sy4">;</span> i<span class="sy1">&lt;</span>n<span class="sy4">;</span> <span class="sy2">++</span>i<span class="br0">&#41;</span> <span class="br0">&#123;</span>
	<span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> j<span class="sy1">=</span><span class="nu0">0</span><span class="sy4">;</span> j<span class="sy1">&lt;</span>m<span class="sy4">;</span> <span class="sy2">++</span>j<span class="br0">&#41;</span>
		<span class="kw1">if</span> <span class="br0">&#40;</span>a<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#91;</span>j<span class="br0">&#93;</span> <span class="sy1">==</span> <span class="nu0">1</span><span class="br0">&#41;</span>
			d<span class="br0">&#91;</span>j<span class="br0">&#93;</span> <span class="sy1">=</span> i<span class="sy4">;</span>
	<span class="kw1">while</span> <span class="br0">&#40;</span><span class="sy3">!</span>st.<span class="me1">empty</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> st.<span class="me1">pop</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span>
	<span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> j<span class="sy1">=</span><span class="nu0">0</span><span class="sy4">;</span> j<span class="sy1">&lt;</span>m<span class="sy4">;</span> <span class="sy2">++</span>j<span class="br0">&#41;</span> <span class="br0">&#123;</span>
		<span class="kw1">while</span> <span class="br0">&#40;</span><span class="sy3">!</span>st.<span class="me1">empty</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy3">&amp;&amp;</span> d<span class="br0">&#91;</span>st.<span class="me1">top</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#93;</span> <span class="sy1">&lt;=</span> d<span class="br0">&#91;</span>j<span class="br0">&#93;</span><span class="br0">&#41;</span>  st.<span class="me1">pop</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span>
		d1<span class="br0">&#91;</span>j<span class="br0">&#93;</span> <span class="sy1">=</span> st.<span class="me1">empty</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy4">?</span> <span class="sy2">-</span><span class="nu0">1</span> <span class="sy4">:</span> st.<span class="me1">top</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span>
		st.<span class="me1">push</span> <span class="br0">&#40;</span>j<span class="br0">&#41;</span><span class="sy4">;</span>
	<span class="br0">&#125;</span>
	<span class="kw1">while</span> <span class="br0">&#40;</span><span class="sy3">!</span>st.<span class="me1">empty</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> st.<span class="me1">pop</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span>
	<span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> j<span class="sy1">=</span>m<span class="sy2">-</span><span class="nu0">1</span><span class="sy4">;</span> j<span class="sy1">&gt;=</span><span class="nu0">0</span><span class="sy4">;</span> <span class="sy2">--</span>j<span class="br0">&#41;</span> <span class="br0">&#123;</span>
		<span class="kw1">while</span> <span class="br0">&#40;</span><span class="sy3">!</span>st.<span class="me1">empty</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy3">&amp;&amp;</span> d<span class="br0">&#91;</span>st.<span class="me1">top</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#93;</span> <span class="sy1">&lt;=</span> d<span class="br0">&#91;</span>j<span class="br0">&#93;</span><span class="br0">&#41;</span>  st.<span class="me1">pop</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span>
		d2<span class="br0">&#91;</span>j<span class="br0">&#93;</span> <span class="sy1">=</span> st.<span class="me1">empty</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy4">?</span> m <span class="sy4">:</span> st.<span class="me1">top</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span>
		st.<span class="me1">push</span> <span class="br0">&#40;</span>j<span class="br0">&#41;</span><span class="sy4">;</span>
	<span class="br0">&#125;</span>
	<span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> j<span class="sy1">=</span><span class="nu0">0</span><span class="sy4">;</span> j<span class="sy1">&lt;</span>m<span class="sy4">;</span> <span class="sy2">++</span>j<span class="br0">&#41;</span>
		ans <span class="sy1">=</span> max <span class="br0">&#40;</span>ans, <span class="br0">&#40;</span>i <span class="sy2">-</span> d<span class="br0">&#91;</span>j<span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="sy2">*</span> <span class="br0">&#40;</span>d2<span class="br0">&#91;</span>j<span class="br0">&#93;</span> <span class="sy2">-</span> d1<span class="br0">&#91;</span>j<span class="br0">&#93;</span> <span class="sy2">-</span> <span class="nu0">1</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy4">;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw3">cout</span> <span class="sy1">&lt;&lt;</span> ans<span class="sy4">;</span></pre><p><p><p><p><p><p><p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><hr><p>
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'e-maxx';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script></td></tr></table></body></html>