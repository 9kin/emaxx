<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><title>MAXimal :: algo :: Знаковая площадь треугольника и предикат 'По часовой стрелке'</title><meta http-equiv="Content-Type" content="text/html; charset=windows-1251"><meta name="author" lang="ru" content="e-maxx" /><meta name="description" content="Алгоритмы, олимпиадное программирование, математика" /><meta name="keywords" content="алгоритмы программирование" /><meta name="google-site-verification" content="Pnjjj2XuxB0CTiqgDDvkp79bfSeDQ8Vw57iNeDJZkSc" /><link rel="stylesheet" type="text/css" href="../data/style.css"><script type="text/javascript" src="../data/jquery.js"></script><script type="text/javascript" src="../data/page-contents.js"></script><link rel="stylesheet" type="text/css" href="../geshi/geshi.css"><!--[if IE]><style>.menu a, .menu a:hover { width: 100%; }</style><![endif]--></head><body><table class=main cellpadding=0 cellspacing=0><tr><td class=title colspan=2><p>MAXimal</p></td></tr><tr><td class=menu><ul><li><a href="../index.php.html" >home</a></li><li><a href="index.html" class=current>algo</a></li><li><a href="../bookz/index.html" >bookz</a></li><li><a href="../forum/index.html" >forum</a></li><li><a href="../about.php.html" >about</a></li></ul></td><td class=content><p class=algoinfo>добавлено: 11 Jun 2008 10:11<br>редактировано: 10 Nov 2011 20:42</p><div id="contents-table"><p id="contents-table-title">Содержание <a href="oriented_area.html#" id="contents-hide">[скрыть]</a><a href="oriented_area.html#" id="contents-show" style="display:none">[показать]</a></p><div style="display:none"></div></div><h1> Знаковая площадь треугольника и предикат "По часовой стрелке" </h1><p><p><h2 style="padding-top:40px;"> Определение </h2><p>Пусть даны три точки <img class=tex src="../tex2png/cache/3004a92c72fcce1f45bc5afc7f7e1503.png" alt="p_1">, <img class=tex src="../tex2png/cache/55e7fe9f49847b40636ecb9b2bb094a2.png" alt="p_2">, <img class=tex src="../tex2png/cache/4907325b95d05d8255927a2de5429323.png" alt="p_3">. Найдём значение <b>знаковой площади</b> <img class=tex src="../tex2png/cache/7af761eb0d1f3ce7b5a85ce3d8902662.png" alt="S"> треугольника <img class=tex src="../tex2png/cache/79a103c82ed3a1b715700973238568aa.png" alt="p_1 p_2 p_3">, т.е. площади этого треугольника, взятой со знаком плюс или минус в зависимости от типа поворота, образуемого точками <img class=tex src="../tex2png/cache/3004a92c72fcce1f45bc5afc7f7e1503.png" alt="p_1">, <img class=tex src="../tex2png/cache/55e7fe9f49847b40636ecb9b2bb094a2.png" alt="p_2">, <img class=tex src="../tex2png/cache/4907325b95d05d8255927a2de5429323.png" alt="p_3">: против часовой стрелки или по ней соответственно.<p>Понятно, что, если мы научимся вычислять такую знаковую ("ориентированную") площадь, то сможем и находить обычную площадь любого треугольника, а также сможем проверять, по часовой стрелке или против направлена какая-либо тройка точек.<p><p><h2 style="padding-top:40px;"> Вычисление </h2><p>Воспользуемся понятием <b>косого</b> (псевдоскалярного) произведения векторов. Оно как раз равно удвоенной знаковой площади треугольника:<p><p class=formula><img class=tex src="../tex2png/cache/83282517c45359c8089dc01c0bd965ff.png" alt=" a \land b = |a| |b| \sin \angle (a, b) = 2 S, "></p><p>где угол <img class=tex src="../tex2png/cache/f4eab84c08c6d160fb75df88e408f986.png" alt="\angle (a, b)"> берётся ориентированным, т.е. это угол вращения между этими векторами против часовой стрелки.<p>(Модуль косого произведения двух векторов равен модулю <b>векторного</b> произведения их.)<p>Косое произведение вычисляется как величина определителя, составленного из координат точек:<p><p class=formula><img class=tex src="../tex2png/cache/9af4fff1e0821cd9437e0f2171ec7fbc.png" alt=" 2 S = \left| \matrix{
x_1 & y_1 & 1 \cr
x_2 & y[...]"></p><p>Раскрывая определитель, можно получить такую формулу:<p><p class=formula><img class=tex src="../tex2png/cache/9e5acd893a5e549f996bd06b732914e1.png" alt=" 2 S = x_1 (y_2 - y_3) + x_2 (y_3 - y_1) + x_3 (y_[...]"></p><p>Можно сгруппировать третье слагаемое с первыми двумя, избавившись от одного умножения:<p><p class=formula><img class=tex src="../tex2png/cache/fdf0b98c184be1043921349f69fd1b9e.png" alt=" 2 S = (x_2 - x_1) (y_3 - y_1) - (y_2 - y_1) (x_3 [...]"></p><p>Последнюю формулу удобно записывать и запоминать в матричном виде, как следующий определитель:<p><p class=formula><img class=tex src="../tex2png/cache/3d6f3d0744e50a4f7ab334b5e89bf0c7.png" alt=" 2 S = \left| \matrix{
x_2 - x_1 & y_2 - y_1 \cr[...]"><p></p><p><h2 style="padding-top:40px;"> Реализация </h2><p>Функция, вычисляющая удвоенную знаковую площадь треугольника:<p><pre class="notranslate cpp"><span class="kw4">int</span> triangle_area_2 <span class="br0">&#40;</span><span class="kw4">int</span> x1, <span class="kw4">int</span> y1, <span class="kw4">int</span> x2, <span class="kw4">int</span> y2, <span class="kw4">int</span> x3, <span class="kw4">int</span> y3<span class="br0">&#41;</span> <span class="br0">&#123;</span>
	<span class="kw1">return</span> <span class="br0">&#40;</span>x2 <span class="sy2">-</span> x1<span class="br0">&#41;</span> <span class="sy2">*</span> <span class="br0">&#40;</span>y3 <span class="sy2">-</span> y1<span class="br0">&#41;</span> <span class="sy2">-</span> <span class="br0">&#40;</span>y2 <span class="sy2">-</span> y1<span class="br0">&#41;</span> <span class="sy2">*</span> <span class="br0">&#40;</span>x3 <span class="sy2">-</span> x1<span class="br0">&#41;</span><span class="sy4">;</span>
<span class="br0">&#125;</span></pre><p>Функция, возвращающая обычную площадь треугольника:<p><pre class="notranslate cpp"><span class="kw4">double</span> triangle_area <span class="br0">&#40;</span><span class="kw4">int</span> x1, <span class="kw4">int</span> y1, <span class="kw4">int</span> x2, <span class="kw4">int</span> y2, <span class="kw4">int</span> x3, <span class="kw4">int</span> y3<span class="br0">&#41;</span> <span class="br0">&#123;</span>
	<span class="kw1">return</span> <span class="kw3">abs</span> <span class="br0">&#40;</span>triangle_area_2 <span class="br0">&#40;</span>x1, y1, x2, y2, x3, y3<span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="sy2">/</span> <span class="nu16">2.0</span><span class="sy4">;</span>
<span class="br0">&#125;</span></pre><p>Функция, проверяющая, образует ли указанная тройка точек поворот по часовой стрелке:<p><pre class="notranslate cpp"><span class="kw4">bool</span> clockwise <span class="br0">&#40;</span><span class="kw4">int</span> x1, <span class="kw4">int</span> y1, <span class="kw4">int</span> x2, <span class="kw4">int</span> y2, <span class="kw4">int</span> x3, <span class="kw4">int</span> y3<span class="br0">&#41;</span> <span class="br0">&#123;</span>
	<span class="kw1">return</span> triangle_area_2 <span class="br0">&#40;</span>x1, y1, x2, y2, x3, y3<span class="br0">&#41;</span> <span class="sy1">&lt;</span> <span class="nu0">0</span><span class="sy4">;</span>
<span class="br0">&#125;</span></pre><p>Функция, проверяющая, образует ли указанная тройка точек поворот против часовой стрелки:<p><pre class="notranslate cpp"><span class="kw4">bool</span> counter_clockwise <span class="br0">&#40;</span><span class="kw4">int</span> x1, <span class="kw4">int</span> y1, <span class="kw4">int</span> x2, <span class="kw4">int</span> y2, <span class="kw4">int</span> x3, <span class="kw4">int</span> y3<span class="br0">&#41;</span> <span class="br0">&#123;</span>
	<span class="kw1">return</span> triangle_area_2 <span class="br0">&#40;</span>x1, y1, x2, y2, x3, y3<span class="br0">&#41;</span> <span class="sy1">&gt;</span> <span class="nu0">0</span><span class="sy4">;</span>
<span class="br0">&#125;</span></pre><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><hr><p>
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'e-maxx';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script></td></tr></table></body></html>